(this["webpackJsonpui-experiments"]=this["webpackJsonpui-experiments"]||[]).push([[0],{12:function(e,t,n){e.exports={App:"App_App__16ZpL",ButtonIcon:"App_ButtonIcon__2QY-U",Updating:"App_Updating__2ZyUt"}},13:function(e,t,n){e.exports={NewController:"NewController_NewController__3v_UI"}},20:function(e,t,n){},26:function(e,t,n){"use strict";n.r(t);var c=n(0),a=(n(16),n(2)),r=n.n(a),o=n(11),i=n.n(o),s=(n(20),n(6)),j=n(3),l=n(12),u=n.n(l),b=function(e,t,n,c,a){var r=e+"/"+t;fetch(r,{method:"GET",cache:"no-cache"}).then((function(e){c&&c(),e.json().then((function(t){e.ok?n(t):a&&a({error:"server error ".concat(e.status," calling ").concat(r),status:e.status,body:t})}))})).catch((function(e){c&&c(),a&&a({error:"failed to fetch from ".concat(r)})}))},O="https://siemens-controller.herokuapp.com",d=n(4),f=n(5),x=n(8),h=n.n(x),p=function(e){return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:e.name}),Object(c.jsx)("td",{children:Object(c.jsx)("input",{value:e.value,onChange:e.update})}),Object(c.jsx)("td",{children:Object(c.jsx)("button",{children:e.updating?Object(c.jsx)(d.a,{icon:f.b,className:"fa-spin"}):Object(c.jsx)(d.a,{icon:f.a,onClick:e.save})})}),Object(c.jsx)("td",{children:Object(c.jsx)("button",{children:Object(c.jsx)(d.a,{icon:f.c,onClick:e.delete})})})]})},v=function(e){return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:Object(c.jsx)("input",{value:e.name,onChange:e.updateName,placeholder:"new name"})}),Object(c.jsx)("td",{children:Object(c.jsx)("input",{value:e.value,onChange:e.updateValue,placeholder:"value"})}),Object(c.jsx)("td",{children:Object(c.jsx)("button",{children:e.updating?Object(c.jsx)(d.a,{icon:f.b,className:"fa-spin"}):Object(c.jsx)(d.a,{icon:f.a,onClick:e.save})})}),Object(c.jsx)("td",{})]})},m=function(e){var t=Object(a.useState)(!1),n=Object(j.a)(t,2),r=n[0],o=n[1],i=Object(a.useState)(Object(s.a)({},e.variables)),l=Object(j.a)(i,2),u=l[0],x=l[1],m=Object(a.useState)({name:"",value:""}),C=Object(j.a)(m,2),g=C[0],_=C[1],N=Object(a.useState)(!1),k=Object(j.a)(N,2),S=k[0],w=k[1];Object(a.useEffect)((function(){S&&e.delete(y)}));var y=e.controller,A=function(e,t){var n=Object(s.a)({},g),c=e.target.value;"name"===t&&(c=c.replace(/\s/g,"")),n[t]=c,_(n)},T=function(e,t,n,c){!r&&t&&(o(e),function(e,t,n,c,a,r){if(t){var o="controller/".concat(e,"/variable/set?").concat(t,"=").concat(n);b(O,o,c,a,r)}}(y,t,n,(function(){var e=Object(s.a)({},u);e[t]=n,x(e),c&&_({name:"",value:""})}),(function(){o(!1)})))},E=function(e,t){r||(o(e),function(e,t,n,c,a){var r="controller/".concat(e,"/variable/delete?").concat(t);b(O,r,n,c,a)}(y,t,(function(){var e=Object(s.a)({},u);delete e[t],x(e)}),(function(){o(!1)})))},F=function(e){if(e){var t="".concat(y,"-").concat(e),n=u[e];return Object(c.jsx)(p,{name:e,value:n,updating:r===t,update:function(t){return function(e,t){var n=Object(s.a)({},u);n[e]=t.target.value,x(n)}(e,t)},save:function(){return T(t,e,n)},delete:function(n){return E(t,e)}},t)}};return Object(c.jsxs)("div",{className:h.a.Controller,children:[Object(c.jsxs)("div",{className:h.a.Title,children:[Object(c.jsx)("span",{className:h.a.Name,children:y}),"@"===r?Object(c.jsx)(d.a,{icon:f.b,className:"fa-spin",size:"xs"}):Object(c.jsx)(d.a,{icon:f.c,size:"xs",onClick:function(){var e,t,n;r||(o("@"),e=function(){w(y)},t=function(){o(!1)},b(O,"controller/".concat(y,"/delete"),e,t,n))}})]}),Object(c.jsxs)("table",{className:"pure-table",children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:"Variable"}),Object(c.jsx)("td",{children:"Value"}),Object(c.jsx)("td",{children:"Save"}),Object(c.jsx)("td",{children:"Delete"})]})}),Object(c.jsxs)("tbody",{children:[Object.keys(u).map((function(e){return F(e)})),function(){var e="".concat(y,"@new_variable"),t=g.name,n=g.value;return Object(c.jsx)(v,{name:t,value:n,updating:r===e,save:function(){return T(e,t,n,!0)},updateName:function(e){return A(e,"name")},updateValue:function(e){return A(e,"value")}},e)}()]})]})]})},C=n(13),g=n.n(C),_=function(e){var t=Object(a.useState)(!1),n=Object(j.a)(t,2),r=n[0],o=n[1],i=Object(a.useState)(""),s=Object(j.a)(i,2),l=s[0],u=s[1];return Object(c.jsxs)("div",{className:g.a.NewController,children:[Object(c.jsx)("h1",{children:"Create new controller"}),Object(c.jsxs)("div",{children:[Object(c.jsx)("input",{value:l,onChange:function(e){u(e.target.value.replace(/\s/g,""))}}),Object(c.jsx)("button",{children:r?Object(c.jsx)(d.a,{icon:f.b,className:"fa-spin"}):Object(c.jsx)(d.a,{icon:f.a,onClick:function(){!r&&l&&(o(!0),function(e,t,n,c){b(O,"controller/".concat(e,"/create"),t,n,c)}(l,(function(){e.create(l),u("")}),(function(){o(!1)})))}})})]})]})},N=function(e){var t=Object(a.useState)({}),n=Object(j.a)(t,2),r=n[0],o=n[1];return Object(a.useEffect)((function(){var e,t;b(O,"status",(function(e){o(e)}),e,t)}),[]),Object(c.jsxs)("p",{children:[r.startedAt," | ",r.root]})},k=function(){var e=Object(a.useState)({}),t=Object(j.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(""),i=Object(j.a)(o,2),l=i[0],d=i[1],f=Object(a.useState)(!1),x=Object(j.a)(f,2),h=x[0],p=x[1];Object(a.useEffect)((function(){Object.keys(n).length||h||(p(!0),b(O,"controller",(function(e){r(e),d(""),p(!1)}),(function(){}),(function(e){d("".concat(e.error,". Re-try in 5 seconds...")),d("".concat(e.error,". Re-try in 5 seconds...")),setTimeout((function(){return p(!1)}),5e3)})))}),[n,h,l]);var v=function(e){var t=Object(s.a)({},n);delete t[e],r(t)};return Object(c.jsxs)(c.Fragment,{children:[l?Object(c.jsx)("p",{children:l}):"",h?Object(c.jsx)("p",{children:"Loading..."}):"",Object(c.jsx)("button",{onClick:function(){r({})},children:"Refresh"}),Object(c.jsx)("h1",{children:"Controllers"}),Object(c.jsxs)("div",{className:u.a.App,children:[Object.keys(n).map((function(e){return Object(c.jsx)(m,{controller:e,variables:n[e],delete:v},e)})),Object(c.jsx)(_,{create:function(e){var t=Object(s.a)({},n);t[e]={},r(t)}}),Object(c.jsx)("hr",{}),Object(c.jsx)(N,{})]})]})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,27)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),c(e),a(e),r(e),o(e)}))};i.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(k,{})}),document.getElementById("root")),S()},8:function(e,t,n){e.exports={Controller:"Controller_Controller__1Aul2",Title:"Controller_Title__Y5eAi",Name:"Controller_Name__1PVxC"}}},[[26,1,2]]]);
//# sourceMappingURL=main.ea2952cd.chunk.js.map